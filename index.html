<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>CoCreations</title>
  <link rel="stylesheet" href="./css/main.css">
  <link rel="stylesheet" href="./css/outer.css">
  <link rel="stylesheet" href="./css/navigation.css">
  <link rel="stylesheet" href="./css/workspace.css">

</head>
<body>

<div class="header">
  <img class="logo" src="./img/logo.png" alt="CoCreations Logo">
  <h1>Your Creation</h1>
</div>

<div id="toolbar">
  <div class="node-template" draggable="true" data-type="1" >Ebene 1</div>
  <div class="node-template" draggable="true" data-type="2" >Ebene 2</div>
  <div class="node-template" draggable="true" data-type="3" >Ebene 3</div>
</div>


<div id="mindmap-container">

  <div id="sidebar-left" class="sidebar">
    
    <!-- NUR ADMIN (user sperren, was sonst noch settings? link erstellen, ) -->
     <!--
      <img src="./img/icon-gear.jpeg" alt="Icon settings"
       style="cursor: pointer;" onclick="document.getElementById('dialogIconSettings').showModal()">

    <dialog id="dialogIconSettings">
      <h2>Einstellungen</h2>
      <p>Hier soll z.B. der Admin Nutzer (IP-Adressen) sperren können.</p>
      <button class="close"  onclick="document.getElementById('dialogIconSettings').close()">Schließen</button>
    </dialog> -->

    <!-- NUR ADMIN -->
      <img src="./img/icon-plus.jpeg" alt="Icon add" 
       style="cursor: pointer;" onclick="document.getElementById('dialogIconAdd').showModal()">

    <dialog id="dialogIconAdd">
      <h2>Neuen Raum hinzufügen</h2>
      <p>Hier soll der Admin neue Unterräume erzuegen können. 
        Wenn möglich abfragen, ob der Inhalt kopiert werden soll.</p>
      <button class="close"  onclick="document.getElementById('dialogIconAdd').close()">Schließen</button>
    </dialog>

       <img src="./img/icon-pattern.jpeg" alt="Icon room overview"
       style="cursor: pointer;" onclick="document.getElementById('dialogIconOverviewRooms').showModal()">

    <dialog id="dialogIconOverviewRooms">
      <h2>Übersicht der Räume</h2>
      <p>Hier soll ein Übersicht über offene Räume zu sehen sein. Das Icon soll nur sichtbar sein, wenn mehrere Räume existieren</p>
      <button class="close"  onclick="document.getElementById('dialogIconOverviewRooms').close()">Schließen</button>
    </dialog>
<!--
       <img src="./img/icon-pen.jpeg" alt="Icon edit username"
       style="cursor: pointer;" onclick="document.getElementById('dialogIconEdit').showModal()">

    <dialog id="dialogIconEdit">
      <h2>Setze deinen Anzeigenamen!</h2>
      <p>Hier soll man seinen nickname ändern können. 
        To-Do: array erstellen mit paar Standardwerten + generell speichern
      </p>
      <input type="text" id="setNickname" placeholder="choose wisely">
      <button onclick="send('setNickname',{value:document.getElementById('setNickname').value})">Festlegen</button>
      <br>
      <button class="close" onclick="document.getElementById('dialogIconEdit').close()">Schließen</button>
    </dialog> -->

      <img src="./img/icon-eye.jpeg" alt="Icon edit username"
       style="cursor: pointer;" onclick="document.getElementById('dialogIconOverviewUser').showModal(); loadAndDisplayAllUsers();">

    


    <dialog id="dialogIconOverviewUser">
      <h2>Übersicht der Teilnehmer</h2>
      <!-- <p>Hier soll eine Übersicht über die Nutzer erscheinen.</p> -->
       <div id="userListContainer"></div> <!-- ⬅ Hier werden die Nicknames eingefügt -->
      <button class="close" onclick="document.getElementById('dialogIconOverviewUser').close()">Schließen</button> 

    </dialog>




  </div>
  <button class="pdfButton" onclick="exportMindmapToPDF()">Download PDF</button>
  
  <div id="ipLockOverlay" style="display: none;">
  <div class="overlay-box">
    <p id="overlayMessage">Möchtest du diese IP wirklich sperren?</p>
    <div class="overlay-buttons">
      <button id="confirmLockBtn">Ja, sperren</button>
      <button id="cancelLockBtn">Abbrechen</button>
    </div>
  </div>
</div>


  <svg id="mindmap" width="1000" height="600"></svg>
  
</div>









<div id="nicknameModal" style="position:fixed; top:0; left:0; right:0; bottom:0; background:#0008; display:flex; align-items:center; justify-content:center; z-index:1000;">
  <div style="background:white; padding:20px; border-radius:10px; text-align:center;">
    <h2>Bitte gib deinen Nickname ein</h2>
    <input type="text" id="nicknameInput" placeholder="Nickname" />
    <br><br>
    <button onclick="submitNickname()">Weiter</button>
  </div>
</div>



<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>


<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>















<script src="./script.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/svg2pdf.js@1.4.0/dist/svg2pdf.min.js"></script>
</body>
</html>
